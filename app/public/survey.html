<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!--Boostrap Links-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

</head>

<body>
    <div class="jumbotron">
        <h1 class="display-4">Friend-Finder</h1>
        <hr class="my-4">
        <h4>See who out there may want to chill!</h4>
        <a class="btn btn-primary btn-lg" href="/" role="button">Home</a>
    </div>

    <form>
        <div class="form-group sur">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" placeholder="Name">
            <label for="pic">Picture</label>
            <input type="text" class="form-control" id="pic" placeholder="Enter image link">
            <label for="questionOne"> Question One</label>
            <h4>You look out the window and say man I wish I was there!</h4>
            <label for="questionOneSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select1" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionTwo"> Question Two</label>
            <h4>The menu is way to long so you find the drink list make you choice and tell the waiter to bring the
                special for the evening.</h4>
            <label for="questionTwoSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select2" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionThree"> Question Three</label>
            <h4>A walk at night with the stars for company instead of a bustling daytime stroll.</h4>
            <label for="questionThreeSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select3" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionFour"> Question Four</label>
            <h4>Pizza it is what starts a good time!</h4>
            <label for="questionFourSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select4" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionFive"> Question Five</label>
            <h4>Long walks down a sunset beach......skip, this movie looks boring!</h4>
            <label for="questionFourSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select5" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionSix"> Question Six</label>
            <h4>This pebble definitely could bounce off that seat cushion and off that pillow into that cup, 10 points
                worth!</h4>
            <label for="questionSixSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select6" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionSeven"> Question Seven</label>
            <h4>Relaxing is an art form!</h4>
            <label for="questionSevenSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select7" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionEight"> Question Eight</label>
            <h4>It is not about how often you communicate but what you communicate.</h4>
            <label for="questionEightSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select8" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionNine" class="text-warning"></label> Question Nine</label>
            <h4>I know where point B is, point B just happens to keep changing.</h4>
            <label for="questionNineSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select9" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
            <label for="questionTen"> Question Ten</label>
            <h4>Aliens exist! Phone home E.T.!</h4>
            <label for="questionTenSelect">Choose from 1 (least agree) to 5 (most agree) to signal agreement!</label>
            <select class="form-control" id="select10" style="width: 11%">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary" id="submit">Submit</button>
    </form>
    <script>
        $("#submit").on("click", function (event) {
            event.preventDefault();
            var selectArray = [
                parseInt($("#select1").val()),
                parseInt($("#select2").val()),
                parseInt($("#select3").val()),
                parseInt($("#select4").val()),
                parseInt($("#select5").val()),
                parseInt($("#select6").val()),
                parseInt($("#select7").val()),
                parseInt($("#select8").val()),
                parseInt($("#select9").val()),
                parseInt($("#select10").val())
            ];
            var scoreTotal = selectArray.reduce((accumulator, currentValue) => accumulator + currentValue, 0);
            console.log(scoreTotal);
            var newFriend = {
                name: $("#name").val().trim(),
                photo: $("#pic").val().trim(),
                scores: selectArray
            };
            var perFriend = 51;
            var newF = "";
            find();
            function find() {
                $.get("/api/friends", function (req, res) {
                req.forEach(function (element) {
                    const selectArr = element.scores;
                    var totScore = (selectArr.reduce((accumulator, currentValue) => accumulator + parseInt(currentValue), 0));
                    if (Math.abs(totScore - scoreTotal) < perFriend) {
                        perFriend = Math.abs(totScore - scoreTotal);
                        newF = element;
                        console.log(perFriend);
                    }
                    else {
                        console.log(totScore);
                    }
                })
                console.log(newF);
            })
            }
            $.post("/api/friends", newFriend)
                .then(function (data) {
                    console.log("app/public/survey.html", data);
                    alert("Adding friend...");
                });
            
        });


    </script>

</body>

</html>